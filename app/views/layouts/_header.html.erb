<header class="header">
  <a href="/static_pages/main" class="logo">
    <!-- Add the class icon to your logo image or logo icon to add the margining -->
    <%=  image_tag("v-logo.png", alt: "Logo Image") %>
  </a>
  <!-- Header Navbar: style can be found in header.less -->
  <nav class="navbar navbar-static-top" role="navigation">
    <!-- Sidebar toggle button-->
    <a href="#" class="navbar-btn sidebar-toggle" data-toggle="offcanvas" role="button">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </a>
    <div class="navbar-right">
      <ul class="nav navbar-nav">

        <!--<li>
  <%=  image_tag("vg-logo.png", alt: "Logo Image" , class: "logo2") %>
</li>-->
        <!-- User Account: style can be found in dropdown.less -->
        <li class="dropdown user user-menu">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <i class="glyphicon glyphicon-user"></i>
            <span>admin<i class="caret"></i></span>
          </a>
          <ul class="dropdown-menu">
            <!-- User image -->
            <li class="user-header bg-light-blue">
              <!--<img src="../app/assets/images/avatar5.png" class="img-circle" alt="User Image" />-->
              <%=  image_tag("avatar5.png", class: "img-circle" , alt: "User Image") %>
              <p>
                Jane Doe - Web Developer
                <small>Member since Nov. 2012</small>
              </p>
            </li>
            <!-- Menu Footer-->
            <li class="user-footer">
              <div class="pull-left">
                <a class="btn btn-default btn-flat" data-toggle="modal" data-target="#compose-modal">Add man</a>
              </div>
              <div class="pull-left" style="margin-left: 10px">
                <a  class="btn btn-default btn-flat">Profile</a>
              </div>
              <div class="pull-right">
                <a href="/sessions/destroy" class="btn btn-default btn-flat">Sign out</a>
              </div>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>
</header>

<div class="modal fade" id="compose-modal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title"><i class="fa fa-envelope-o"></i> Add Manager</h4>
      </div>
      <form id="addForm" data-remote="true">
        <div class="modal-body">
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Username:</span>
              <input id="username" name="manager[username]" class="form-control" placeholder="Username" required>
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Realname:</span>
              <input id="realname" name="manager[realname]" class="form-control" placeholder="Username" required>
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Password: </span>
              <input id="password" name="manager[password]" type="password" class="form-control" placeholder="Password" required>
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">RPassword:</span>
              <input id="password_confirmation" name="manager[password_confirmation]" type="password" class="form-control" placeholder="password_confirmation" required>
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">TelPhone:</span>
              <input id="telphone" name="manager[telphone]" class="form-control" placeholder="telphone" required>
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Moblie:</span>
              <input id="mobile" name="manager[mobile]" class="form-control" placeholder="mobile" required>
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Email:</span>
              <input id="email" name="manager[email]" class="form-control" placeholder="email" required>
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <span class="input-group-addon">Construction:</span>
              <input id="construction" name="manager[construction]" class="form-control" placeholder="construction" required>
            </div>
          </div>
        </div>
        <div class="modal-footer clearfix">

          <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i> 取消</button>

          <button class="btn btn-primary pull-center" onclick="AddManager()"><i class="fa fa-envelope"></i> 保存</button>
        </div>
      </form>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div>

<script>
    function AddManager() {
        var url = "/managers";
        // var data={username:$("#username").val(),password:$("#password").val(),password_confirmation:$("#password_confirmation").val(),image:$("#image").val(),logintime:$("#logintime").val(),status:$("#status").val()};
        $.post(url, $("#addForm").serialize(), function (data) {
            if(data){
                alert("保存成功!");
                document.getElementById("addForm").reset();
            }else{
                alert("保存失败!");
            }
        });


        /*$.ajax({
             type: "post",
             url: "/managers",
             data: $("#addForm").serialize(),
             dataType: "json",
             success: function (data) {
             alert(0);
             }, error: function (data) {
             alert(data)
             }
         });*/
    }
</script>